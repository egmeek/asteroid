<template name="learnEditor">
  <div class="container learn-editor">
    <div class="row">
      <div class="span12">
        <ul class="nav nav-tabs">
          <li class="active"><a href="#edit" data-toggle="tab">Edit post</a></li>
          <li><a href="#prerequisites" data-toggle="tab">Pre-requisites</a></li>
          <li><a href="#code" data-toggle="tab">Code</a></li>
          <li><a href="#preview" data-toggle="tab">Preview</a></li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active" id="edit">
            {{#isolate}}
              {{#with post}}
                {{> editTab }}
              {{/with}}
            {{/isolate}}
          </div>
          <div class="tab-pane" id="prerequisites">
            {{#isolate}}
              {{#with post}}
                {{> prerequisitesTab }}
              {{/with}}
            {{/isolate}}
          </div>
          <div class="tab-pane" id="code">
            {{#isolate}}
              {{#with post}}
                {{> codeTab }}
              {{/with}}
            {{/isolate}}
          </div>
          <div class="tab-pane" id="preview">
            {{#isolate}}
              {{#with post}}
                {{> learnViewContent }}
              {{/with}}
            {{/isolate}}
          </div>
        </div>
      </div>
    </div>
  </div>  
</template>

<template name="editTab">
  <div class="row">
    <div class="span8">
      <fieldset class="form-horizontal">
        <div class="control-group">
          <label class="control-label">Title</label>
          <div class="controls">
            <input name="title" type="text" value="{{ title }}">
          </div>
        </div>

        <div class="control-group">
          <label class="control-label">Summary</label>
          <div class="controls">
            <textarea name="summary" class="span8">{{{ summary }}}</textarea>
          </div>
        </div>
      
        <div class="control-group">
          <label class="control-label">Image</label>
          <div class="controls">
            <input name="image" type="text" value="{{ image }}"></input>
          </div>
        </div>

        <div class="control-group">
          <label class="control-label">Fancy Link</label>
          <div class="controls">
            <input name="fancyLink" type="text" value="{{ fancyLink }}"></input>
            <span class="help-block help-fancyLink">http://www.pijs.io/learn/{{ fancyLink }}</span>
          </div>
          
        </div>
      
        <div class="control-group">
          <label class="control-label">Content</label>
          <div class="controls">
            <textarea name="content">{{{ content }}}</textarea>
          </div>
        </div>
      </fieldset>
      <button id="post-save" class="btn btn-primary pull-right">Save changes</button>
    </div>
  </div>
</template>

<template name="prerequisitesTab">
  <form id="post-{{ _id }}">
    <div class="row">
      <div class="span8">
        <div class="row">
          {{#each prerequisites}}
            {{> editPrereq}}
          {{/each}}
          <div class="span4 pagination-centered">
            <button class="btn btn-large btn-inverse" name="addPrereq"><i class="icon-plus icon-white"></i></button>
          </div>
        </div>
      </div>
    </div>
  </form>
</template>

<template name="editPrereq">
  <div class="span4 edit-prereq" id="edit-prereq-{{ __index}}">
    <fieldset class="form-horizontal">
      <div class="control-group">
        <label class="control-label" for="title">Title:</label>
        <div class="controls">
          <input type="text" name="title" value="{{ title }}"></input>
        </div>
      </div>

      <div class="control-group">
        <label class="control-label" for="description">Description:</label>
        <div class="controls">
          <input type="text" name="description" value="{{ description }}"></input>
        </div>
      </div>

      <div class="control-group">
        <label class="control-label" for="img">Image URL:</label>
        <div class="controls">
          <input type="text" name="img" value="{{ img }}"></input>
        </div>
      </div>

      <div class="control-group">
        <label class="control-label">Link:</label>
        <div class="controls">
          <input type="text" name="link" value="{{ link }}"></input>
        </div>
      </div>
  
      <button class="btn btn-danger pull-right"><i class="icon-trash icon-white"></i></button>
    </fieldset>
  </div>
</template>

<template name="codeTab">
  <div class="row">
    <div class="span8">
      <fieldset class="form-horizontal">
        <div class="control-group">
          <label class="control-label">Code</label>
          <div class="controls">
            <textarea name="code">{{{ code }}}</textarea>
          </div>
        </div>
      </fieldset>
    </div>
  </div>
</template>